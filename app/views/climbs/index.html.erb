

<script src="//maps.google.com/maps/api/js?v=3.25&key=AIzaSyDanasCjwdD12OrdXgITU17UK2BosIb6-g"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<h1 id="splash" class = "header_text"> Welcome to Chalk Up! </h1>
<span><h5 class = " sub_header_text">Climb. Share. Discover.</h5></span>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <h1>Climb Locations</h1>
      <div style='width: 800px;'>
        <div id="map" style='width: 1000px; height: 600px;'></div>
 <script type="text/javascript">

    handler = Gmaps.build('Google');
handler.buildMap({
    provider: {
      disableDefaultUI: false
      // pass in other Google Maps API options here
    },
    internal: {
      id: 'map'
    }
  },
  function(){
      if(navigator.geolocation)
              navigator.geolocation.getCurrentPosition(displayOnMap);
              markers = handler.addMarkers(<%=raw @hash.to_json %>);

          function displayOnMap(position){
            var marker = handler.addMarker({
              lat: position.coords.latitude,
              lng: position.coords.longitude
            });
            handler.map.centerOn(marker)
            };
});
</script>

        <%= link_to "Add new Location!", new_climb_path(@climb), :class => "btn btn-primary" %>
      </div>
    </div>
  </div>
  <diV class="row">
    <% @climbs.each do |climb| %>
      <%= render :partial => "climb", :locals => {:@climb => climb} %>
    <% end %>
  </div>
</div>
